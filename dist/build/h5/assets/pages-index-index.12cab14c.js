import{c as e,r as t,a as o,o as i,b as n,w as a,d as s,e as l,n as r,f as c,g as u,t as d,i as h,h as m,j as p,k as f,l as _,m as b,s as y,p as g,q as w,F as S,u as x,v as k}from"./index-f5cefc5e.js";import{_ as C}from"./uni-icons.471b0dcd.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as I}from"./uni-card.421687bc.js";import{S as v}from"./StatusBar.ce703030.js";import{r as M}from"./request.bdc72c03.js";import{a as B}from"./app.9134298a.js";/* empty css                                                                  */const D=z({name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data:()=>({textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,elIdBox:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}),computed:{isShowGetMore(){return!0===this.showGetMore||"true"===this.showGetMore},isShowClose(){return!(!0!==this.showClose&&"true"!==this.showClose||!1!==this.showGetMore&&"false"!==this.showGetMore)}},mounted(){this.$nextTick((()=>{this.initSize()}))},methods:{initSize(){if(this.scrollable){let t=[],o=new Promise(((t,o)=>{e().in(this).select(`#${this.elId}`).boundingClientRect().exec((e=>{this.textWidth=e[0].width,t()}))})),i=new Promise(((t,o)=>{e().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec((e=>{this.boxWidth=e[0].width,t()}))}));t.push(o),t.push(i),Promise.all(t).then((()=>{this.animationDuration=this.textWidth/this.speed+"s",this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout((()=>{this.animationPlayState="running"}),1e3)}))}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}},[["render",function(e,p,f,_,b,y){const g=t(o("uni-icons"),C),w=h,S=m;return b.show?(i(),n(S,{key:0,class:"uni-noticebar",style:c({backgroundColor:f.backgroundColor}),onClick:y.onClick},{default:a((()=>[!0===f.showIcon||"true"===f.showIcon?(i(),n(g,{key:0,class:"uni-noticebar-icon",type:"sound",color:f.color,size:1.5*f.fontSize},null,8,["color","size"])):s("v-if",!0),l(S,{ref:"textBox",class:r(["uni-noticebar__content-wrapper",{"uni-noticebar__content-wrapper--scrollable":f.scrollable,"uni-noticebar__content-wrapper--single":!f.scrollable&&(f.single||f.moreText)}]),style:c({height:f.scrollable?1.5*f.fontSize+"px":"auto"})},{default:a((()=>[l(S,{id:b.elIdBox,class:r(["uni-noticebar__content",{"uni-noticebar__content--scrollable":f.scrollable,"uni-noticebar__content--single":!f.scrollable&&(f.single||f.moreText)}])},{default:a((()=>[l(w,{id:b.elId,ref:"animationEle",class:r(["uni-noticebar__content-text",{"uni-noticebar__content-text--scrollable":f.scrollable,"uni-noticebar__content-text--single":!f.scrollable&&(f.single||f.showGetMore)}]),style:c({color:f.color,fontSize:f.fontSize+"px",lineHeight:1.5*f.fontSize+"px",width:b.wrapWidth+"px",animationDuration:b.animationDuration,"-webkit-animationDuration":b.animationDuration,animationPlayState:b.webviewHide?"paused":b.animationPlayState,"-webkit-animationPlayState":b.webviewHide?"paused":b.animationPlayState,animationDelay:b.animationDelay,"-webkit-animationDelay":b.animationDelay})},{default:a((()=>[u(d(f.text),1)])),_:1},8,["id","class","style"])])),_:1},8,["id","class"])])),_:1},8,["class","style"]),y.isShowGetMore?(i(),n(S,{key:1,class:"uni-noticebar__more uni-cursor-point",onClick:y.clickMore},{default:a((()=>[f.moreText.length>0?(i(),n(w,{key:0,style:c({color:f.moreColor,fontSize:f.fontSize+"px"})},{default:a((()=>[u(d(f.moreText),1)])),_:1},8,["style"])):(i(),n(g,{key:1,type:"right",color:f.moreColor,size:1.1*f.fontSize},null,8,["color","size"]))])),_:1},8,["onClick"])):s("v-if",!0),y.isShowClose?(i(),n(S,{key:2,class:"uni-noticebar-close uni-cursor-point"},{default:a((()=>[l(g,{type:"closeempty",color:f.color,size:1.1*f.fontSize,onClick:y.close},null,8,["color","size","onClick"])])),_:1})):s("v-if",!0)])),_:1},8,["style","onClick"])):s("v-if",!0)}],["__scopeId","data-v-a1555b7f"]]),j=z(p({__name:"index",setup(e){f("/static/20231016112713.jpg");const n=()=>{},s=_({content:"",firstImage:"",typeName:""});b((()=>{r()}));const r=()=>{M(B.calendar,{method:"GET"}).then((e=>{const{errorCode:t,errorMessage:o,data:i}=e;if(0==t&&(y({title:o,duration:2e3,icon:"none"}),i)){const e=i.data[0];s.content=e.content,s.firstImage=e.firstImage,s.typeName=e.typeName}})).catch((e=>{console.log(e)}))};return(e,r)=>{const c=t(o("uni-notice-bar"),D),p=x,f=h,_=m,b=t(o("uni-card"),I);return i(),g(S,null,[l(v),l(c,{"is-shadow":"true","background-color":"#e60033",color:"#ffffff","show-icon":"",scrollable:"",text:"初心不负App正式发布了、欢迎大家下载体验、有问题请联系我(1547177202)、谢谢！"}),l(b,{onClick:n,title:s.content},{default:a((()=>[l(_,{class:"uni-body"},{default:a((()=>[l(p,{class:"thumbnail",src:s.firstImage,mode:"widthFix",onClick:r[0]||(r[0]=w((e=>{return t=s.firstImage,void k({current:t,urls:[t]});var t}),["stop"]))},null,8,["src"]),l(f),l(f,null,{default:a((()=>[u("# "+d(s.typeName),1)])),_:1})])),_:1})])),_:1},8,["title"])],64)}}}),[["__scopeId","data-v-ac9c0b67"]]);export{j as default};
